<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="25" zv="Cache for Windows (x86-64) 2017.1 (Build 792)" ts="2017-07-21 20:41:58">
<Class name="fishnet.City">
<Super>%Persistent</Super>
<TimeChanged>64485,74433.565039</TimeChanged>
<TimeCreated>64485,44409.548686</TimeCreated>

<Property name="country">
<Type>%String</Type>
</Property>

<Property name="city">
<Type>%String</Type>
</Property>

<Property name="accent">
<Type>%String</Type>
</Property>

<Property name="region">
<Type>%String</Type>
</Property>

<Property name="pop">
<Type>%String</Type>
</Property>

<Property name="latitude">
<Type>%Decimal</Type>
<Parameter name="SCALE" value="7"/>
</Property>

<Property name="longitude">
<Type>%Decimal</Type>
<Parameter name="SCALE" value="7"/>
</Property>

<Method name="NearestCities">
<ClassMethod>1</ClassMethod>
<FormalSpec>pointId:%String,top:%String</FormalSpec>
<Implementation><![CDATA[
	set sql="select top("_top_") * , sqrt(square(latitude-("_
				"select latitude from fishnet.City " _
					"where id = "_pointId_"))+square(longitude-("_
							"select longitude from fishnet.City "_
									"where id = "_pointId_"))) as dist from fishnet.City order by dist"	
	q ##class(%ZEN.Auxiliary.jsonSQLProvider).%WriteJSONFromSQL(,sql)
]]></Implementation>
</Method>

<Method name="NearestCitiesByCoord">
<ClassMethod>1</ClassMethod>
<FormalSpec>lat:%String,lon:%String,top:%String</FormalSpec>
<Implementation><![CDATA[
	set sql="select top("_top_") * , sqrt(square(latitude-"_lat_")+square(longitude-"_lon_")) as dist from fishnet.City order by dist"	
	q ##class(%ZEN.Auxiliary.jsonSQLProvider).%WriteJSONFromSQL(,sql)
]]></Implementation>
</Method>

<Storage name="Default">
<Type>%Library.CacheStorage</Type>
<DataLocation>^fishnet.CityD</DataLocation>
<DefaultData>CityDefaultData</DefaultData>
<IdLocation>^fishnet.CityD</IdLocation>
<IndexLocation>^fishnet.CityI</IndexLocation>
<StreamLocation>^fishnet.CityS</StreamLocation>
<Data name="CityDefaultData">
<Value name="1">
<Value>%%CLASSNAME</Value>
</Value>
<Value name="2">
<Value>country</Value>
</Value>
<Value name="3">
<Value>city</Value>
</Value>
<Value name="4">
<Value>accent</Value>
</Value>
<Value name="5">
<Value>region</Value>
</Value>
<Value name="6">
<Value>pop</Value>
</Value>
<Value name="7">
<Value>latitude</Value>
</Value>
<Value name="8">
<Value>longitude</Value>
</Value>
</Data>
</Storage>
</Class>
</Export>
